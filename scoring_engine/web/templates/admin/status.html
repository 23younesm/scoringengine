{% extends 'admin/adminbase.html' %}
{% block title %}Admin - Status{% endblock %}
{% block admincontent %}
<div class="container">
  <div class="row">
    <span>Round Progress</span>
    <div class="progress">
        <div id="TotalPercent" class="progress-bar progress-bar-striped active " role="progressbar" aria-valuenow="70"
        aria-valuemin="0" aria-valuemax="100" style="width:70%">
            <span>70%</span>
        </div>
    </div>
  </div>
  <div class="row">
    <span>Team 1</span>
    <div class="progress">
      <div id="Team1Percent" class="progress-bar progress-bar-striped active progress-bar-success" role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width: 40%">
        <span>40%</span>
      </div>
    </div>
    <span>Team 2</span>
    <div class="progress">
      <div id="Team2Percent" class="progress-bar progress-bar-striped active  progress-bar-info" role="progressbar" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100" style="width: 20%">
        <span>20%</span>
      </div>
    </div>
    <span>Team 3</span>
    <div class="progress">
      <div id="Team3Percent" class="progress-bar progress-bar-striped active  progress-bar-warning" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 60%">
        <span>60%</span>
      </div>
    </div>
    <span>Team 4</span>
    <div class="progress">
      <div id="Team4Percent" class="progress-bar progress-bar-striped active  progress-bar-danger" role="progressbar" aria-valuenow="80" aria-valuemin="0" aria-valuemax="100" style="width: 80%">
        <span>80%</span>
      </div>
    </div>
    <span>Team 5</span>
    <div class="progress">
      <div id="Team5Percent" class="progress-bar progress-bar-striped active  progress-bar-danger" role="progressbar" aria-valuenow="30" aria-valuemin="0" aria-valuemax="100" style="width: 30%">
        <span>30%</span>
      </div>
    </div>
  </div>
</div>
<script>
function getProgress(){
    $.getJSON('/api/admin/get_round_progress', function(data) {
        $.each(data, function(key, val) {
            $("#" + key + "Percent").css('width', val + "%").attr('aria-valuenow', val);
            $("#" + key + "Percent span").text(val + "%");
            if (val < 30) {
                $("#" + key + "Percent").attr('class', 'progress-bar progress-bar-striped active progress-bar-danger');
            } else if (val < 70) {
                $("#" + key + "Percent").attr('class', 'progress-bar progress-bar-striped active progress-bar-warning');
            } else {
                $("#" + key + "Percent").attr('class', 'progress-bar progress-bar-striped active progress-bar-success');
            }
        });
    });
}

var getTotalProgress = setInterval(getProgress, 5000);
</script>
{% endblock %}