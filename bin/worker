#!/usr/bin/env python

import os

from scoring_engine.celery_app import celery_app
from scoring_engine.config import config


workdir = os.path.join(os.path.dirname(os.path.abspath(__file__)), '../scoring_engine/engine')
celery_args = [
    'celery',
    '--workdir={0}'.format(workdir),
    '--loglevel=info',
    'worker',
]

if config.worker_num_concurrent_tasks != -1:
  celery_args.append('--concurrency={0}'.format(config.worker_num_concurrent_tasks))

celery_app.start(argv=celery_args)
